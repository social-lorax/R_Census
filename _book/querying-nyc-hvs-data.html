<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Querying NYC HVS Data | Guide to Using Census Data</title>
  <meta name="description" content="This guide provides an overview of using the U.S. Census Bureau’s data." />
  <meta name="generator" content="bookdown 0.45 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Querying NYC HVS Data | Guide to Using Census Data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This guide provides an overview of using the U.S. Census Bureau’s data." />
  <meta name="github-repo" content="social-lorax" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Querying NYC HVS Data | Guide to Using Census Data" />
  
  <meta name="twitter:description" content="This guide provides an overview of using the U.S. Census Bureau’s data." />
  

<meta name="author" content="Ryan Brenner" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="querying-decennial-and-acs-data-with-tidycensus.html"/>
<link rel="next" href="querying-microdata-with-ipums.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Census Data</a></li>
<li class="chapter" data-level="2" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html"><i class="fa fa-check"></i><b>2</b> Understanding Census Geographies</a>
<ul>
<li class="chapter" data-level="2.1" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#background"><i class="fa fa-check"></i><b>2.1</b> Background</a></li>
<li class="chapter" data-level="2.2" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#nested-geographies"><i class="fa fa-check"></i><b>2.2</b> Nested Geographies</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#nation"><i class="fa fa-check"></i><b>2.2.1</b> Nation</a></li>
<li class="chapter" data-level="2.2.2" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#regions"><i class="fa fa-check"></i><b>2.2.2</b> Regions</a></li>
<li class="chapter" data-level="2.2.3" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#divisions"><i class="fa fa-check"></i><b>2.2.3</b> Divisions</a></li>
<li class="chapter" data-level="2.2.4" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#states"><i class="fa fa-check"></i><b>2.2.4</b> States</a></li>
<li class="chapter" data-level="2.2.5" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#counties"><i class="fa fa-check"></i><b>2.2.5</b> Counties</a></li>
<li class="chapter" data-level="2.2.6" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#tracts"><i class="fa fa-check"></i><b>2.2.6</b> Tracts</a></li>
<li class="chapter" data-level="2.2.7" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#block-groups"><i class="fa fa-check"></i><b>2.2.7</b> Block Groups</a></li>
<li class="chapter" data-level="2.2.8" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#blocks"><i class="fa fa-check"></i><b>2.2.8</b> Blocks</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#non-nesting-geographies"><i class="fa fa-check"></i><b>2.3</b> Non-Nesting Geographies</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#place"><i class="fa fa-check"></i><b>2.3.1</b> Place</a></li>
<li class="chapter" data-level="2.3.2" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#core-based-statistical-area-cbsa"><i class="fa fa-check"></i><b>2.3.2</b> Core Based Statistical Area (CBSA)</a></li>
<li class="chapter" data-level="2.3.3" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#public-use-microdata-area-puma"><i class="fa fa-check"></i><b>2.3.3</b> Public Use Microdata Area (PUMA)</a></li>
<li class="chapter" data-level="2.3.4" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#zip-code-tabulation-area-zcta"><i class="fa fa-check"></i><b>2.3.4</b> ZIP Code Tabulation Area (ZCTA)</a></li>
<li class="chapter" data-level="2.3.5" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#legislative-distrcts"><i class="fa fa-check"></i><b>2.3.5</b> Legislative Distrcts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="comparing-geographies-across-time.html"><a href="comparing-geographies-across-time.html"><i class="fa fa-check"></i><b>3</b> Comparing Geographies Across Time</a></li>
<li class="chapter" data-level="4" data-path="querying-decennial-and-acs-data-with-tidycensus.html"><a href="querying-decennial-and-acs-data-with-tidycensus.html"><i class="fa fa-check"></i><b>4</b> Querying Decennial and ACS Data with <code>tidycensus</code></a></li>
<li class="chapter" data-level="5" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html"><i class="fa fa-check"></i><b>5</b> Querying NYC HVS Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#survey-design"><i class="fa fa-check"></i><b>5.1</b> Survey Design</a></li>
<li class="chapter" data-level="5.2" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#variables"><i class="fa fa-check"></i><b>5.2</b> Variables</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#borough-all-units"><i class="fa fa-check"></i><b>5.2.1</b> Borough (All Units)</a></li>
<li class="chapter" data-level="5.2.2" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#regulatory-status-all-units"><i class="fa fa-check"></i><b>5.2.2</b> Regulatory Status (All Units)</a></li>
<li class="chapter" data-level="5.2.3" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#year-built-all-units"><i class="fa fa-check"></i><b>5.2.3</b> Year Built (All Units)</a></li>
<li class="chapter" data-level="5.2.4" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#units-in-building-all-units"><i class="fa fa-check"></i><b>5.2.4</b> Units in Building (All Units)</a></li>
<li class="chapter" data-level="5.2.5" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#coopcondos-all-units"><i class="fa fa-check"></i><b>5.2.5</b> Coop/Condos (All Units)</a></li>
<li class="chapter" data-level="5.2.6" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#occupancy-all-units"><i class="fa fa-check"></i><b>5.2.6</b> Occupancy (All Units)</a></li>
<li class="chapter" data-level="5.2.7" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#tenure-occupied"><i class="fa fa-check"></i><b>5.2.7</b> Tenure (Occupied)</a></li>
<li class="chapter" data-level="5.2.8" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#household-income-occupied"><i class="fa fa-check"></i><b>5.2.8</b> Household Income (Occupied)</a></li>
<li class="chapter" data-level="5.2.9" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#rent-occupied"><i class="fa fa-check"></i><b>5.2.9</b> Rent (Occupied)</a></li>
<li class="chapter" data-level="5.2.10" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#voucher-use-occupied"><i class="fa fa-check"></i><b>5.2.10</b> Voucher Use (Occupied)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#examples"><i class="fa fa-check"></i><b>5.3</b> Examples</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#count-of-vacancy-and-tenure"><i class="fa fa-check"></i><b>5.3.1</b> <strong>Count</strong> of Vacancy and Tenure</a></li>
<li class="chapter" data-level="5.3.2" data-path="querying-nyc-hvs-data.html"><a href="querying-nyc-hvs-data.html#median-rent-by-regulation"><i class="fa fa-check"></i><b>5.3.2</b> <strong>Median Rent</strong> by Regulation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html"><i class="fa fa-check"></i><b>6</b> Querying Microdata with IPUMS</a>
<ul>
<li class="chapter" data-level="6.1" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#extracting-data"><i class="fa fa-check"></i><b>6.1</b> Extracting Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#select-samples"><i class="fa fa-check"></i><b>6.1.1</b> Select Samples</a></li>
<li class="chapter" data-level="6.1.2" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#select-geography"><i class="fa fa-check"></i><b>6.1.2</b> Select Geography</a></li>
<li class="chapter" data-level="6.1.3" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#select-variables"><i class="fa fa-check"></i><b>6.1.3</b> Select Variables</a></li>
<li class="chapter" data-level="6.1.4" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#view-data-cart"><i class="fa fa-check"></i><b>6.1.4</b> View Data Cart</a></li>
<li class="chapter" data-level="6.1.5" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#modify-extract"><i class="fa fa-check"></i><b>6.1.5</b> Modify Extract</a></li>
<li class="chapter" data-level="6.1.6" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#download"><i class="fa fa-check"></i><b>6.1.6</b> Download</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#analyzing-a-survey"><i class="fa fa-check"></i><b>6.2</b> Analyzing a Survey</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Guide to Using Census Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="querying-nyc-hvs-data" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Querying NYC HVS Data<a href="querying-nyc-hvs-data.html#querying-nyc-hvs-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="querying-nyc-hvs-data.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="querying-nyc-hvs-data.html#cb1-2" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span>
<span id="cb1-3"><a href="querying-nyc-hvs-data.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-4"><a href="querying-nyc-hvs-data.html#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="querying-nyc-hvs-data.html#cb1-5" tabindex="-1"></a><span class="co">#All HVS PUF Datasets</span></span>
<span id="cb1-6"><a href="querying-nyc-hvs-data.html#cb1-6" tabindex="-1"></a>all23 <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;https://www.nyc.gov/assets/hpd/data/allunits_puf_23.csv&quot;</span>)</span>
<span id="cb1-7"><a href="querying-nyc-hvs-data.html#cb1-7" tabindex="-1"></a>occ23 <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;https://www.nyc.gov/assets/hpd/data/occupied_puf_23.csv&quot;</span>)</span>
<span id="cb1-8"><a href="querying-nyc-hvs-data.html#cb1-8" tabindex="-1"></a>vac23 <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;https://www.nyc.gov/assets/hpd/data/vacant_puf_23.csv&quot;</span>)</span>
<span id="cb1-9"><a href="querying-nyc-hvs-data.html#cb1-9" tabindex="-1"></a>per23 <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;https://www.nyc.gov/assets/hpd/data/person_puf_23.csv&quot;</span>)</span></code></pre></div>
<p>The NYC Housing and Vacancy Survey (HVS) is a comprehensive housing survey conducted approximately every three years by the U.S. Census Bureau on behalf of the NYC Department of Housing Preservation and Development (HPD). Established in 1965, the HVS was created in response to the City’s Rent Stabilization Law, which requires periodic measurement of the citywide rental vacancy rate to determine whether a housing emergency exists. Beyond its legal function, the survey serves as the city’s primary source of detailed data on housing conditions, affordability, and demographics. It collects information on occupancy status, rent, utilities, income, building age, and physical quality, among many other variables. The HVS provides a unique longitudinal record of New York’s housing stock and is considered one of the most detailed local housing datasets in the United States.</p>
<p>In the wake of Donald Trump’s election and subsequent efforts to restrict access to federal data, the administration removed or suppressed numerous websites and datasets from agencies such as the Census Bureau. In response, responsibility for hosting and maintaining public access shifted into the hands of NYC’s HPD, ensuring continued public access and stewardship of this vital housing data tool. As such, all information about the survey, as well as the survey data itself, is located here: <a href="https://www.nyc.gov/site/hpd/about/research.page" class="uri">https://www.nyc.gov/site/hpd/about/research.page</a></p>
<p>There are four public use files that provide microdata to work with:</p>
<p><img src="Images/HVS/hvs_pufs.png" /></p>
<p>The <code>CONTROL</code> variable joins all of the tables together, with every housing unit in the All Units dataset being in either Occupied Units or Vacant Units, and every person living in an Occupied Unit showing up as their own row in the Persons dataset (i.e., many-to-one match). Projects should start by identifying the universe of interest (all, occupied, or vacant units) and then <strong>left join</strong> to that dataset (using <code>CONTROL</code> as the key) to pull in variables from other datasets.</p>
<hr style="border:2px solid blue">
<div id="survey-design" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Survey Design<a href="querying-nyc-hvs-data.html#survey-design" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Unlike the American Community Survey (ACS), which provides thousands of pre-calculated indicators in ready-made tables and crosstabs, the HVS is released primarily as raw microdata. Each record represents an individual housing unit or person, requiring users to construct their own measures and apply statistical weights to produce representative estimates. Working with the HVS therefore involves a more hands-on analytical process: users must merge datasets, define variables, and apply survey design adjustments using software capable of complex survey processing, such as R’s <code>srvyr</code> package. This structure makes the HVS both more flexible and more demanding, allowing researchers to generate customized analyses while maintaining methodological rigor.</p>
<p>The optimal workflow is (1) decide on a universe of housing units, (2) pull together needed variables from the different files, and (3) convert the dataframe to a replicate-weighted survey design object (using pre-set arguments outlined in the HVS documentation):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="querying-nyc-hvs-data.html#cb2-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="querying-nyc-hvs-data.html#cb2-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb2-3"><a href="querying-nyc-hvs-data.html#cb2-3" tabindex="-1"></a>    all23 <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="querying-nyc-hvs-data.html#cb2-4" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(CONTROL, CSR), </span>
<span id="cb2-5"><a href="querying-nyc-hvs-data.html#cb2-5" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">&quot;CONTROL&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="querying-nyc-hvs-data.html#cb2-6" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey_rep</span>(</span>
<span id="cb2-7"><a href="querying-nyc-hvs-data.html#cb2-7" tabindex="-1"></a>    <span class="at">weights =</span> FW,</span>
<span id="cb2-8"><a href="querying-nyc-hvs-data.html#cb2-8" tabindex="-1"></a>    <span class="at">repweights =</span> <span class="fu">num_range</span>(<span class="st">&quot;FW&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>),</span>
<span id="cb2-9"><a href="querying-nyc-hvs-data.html#cb2-9" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;other&quot;</span>, </span>
<span id="cb2-10"><a href="querying-nyc-hvs-data.html#cb2-10" tabindex="-1"></a>    <span class="at">combined_weights =</span> <span class="cn">TRUE</span>, </span>
<span id="cb2-11"><a href="querying-nyc-hvs-data.html#cb2-11" tabindex="-1"></a>    <span class="at">scale =</span> <span class="dv">4</span><span class="sc">/</span><span class="dv">80</span>, </span>
<span id="cb2-12"><a href="querying-nyc-hvs-data.html#cb2-12" tabindex="-1"></a>    <span class="at">rscales =</span> <span class="dv">1</span>,</span>
<span id="cb2-13"><a href="querying-nyc-hvs-data.html#cb2-13" tabindex="-1"></a>    <span class="at">mse =</span> <span class="cn">TRUE</span></span>
<span id="cb2-14"><a href="querying-nyc-hvs-data.html#cb2-14" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Call: Called via srvyr
## with 80 replicates and MSE variances.
## Sampling variables:
##   - repweights: `FW1 + FW2 + FW3 + FW4 + FW5 + FW6 + FW7 + FW8 + FW9 + FW10 + FW11 + FW12 + FW13 + FW14 + FW15 + FW16 +
##     FW17 + FW18 + FW19 + FW20 + FW21 + FW22 + FW23 + FW24 + FW25 + FW26 + FW27 + FW28 + FW29 + FW30 + FW31 + FW32 +
##     FW33 + FW34 + FW35 + FW36 + FW37 + FW38 + FW39 + FW40 + FW41 + FW42 + FW43 + FW44 + FW45 + FW46 + FW47 + FW48 +
##     FW49 + FW50 + FW51 + FW52 + FW53 + FW54 + FW55 + FW56 + FW57 + FW58 + FW59 + FW60 + FW61 + FW62 + FW63 + FW64 +
##     FW65 + FW66 + FW67 + FW68 + FW69 + FW70 + FW71 + FW72 + FW73 + FW74 + FW75 + FW76 + FW77 + FW78 + FW79 + FW80` 
##   - weights: FW 
## Data variables: 
##   - CONTROL (dbl), TENURE (dbl), HHSIZE (dbl), HH62PLUS (dbl), HHUNDER18 (dbl), HHUNDER6 (dbl), HHFIRSTMOVEIN (dbl),
##     HHDEAR (dbl), HHDEYE (dbl), HHDREM (dbl), HHDPHY (dbl), HHDDRS (dbl), HHDOUT (dbl), HHDONEPLUS (dbl), MOD_HAVE
##     (dbl), MOD_NEED (dbl), UNIT_RATING (dbl), EXTERM_FREQ (dbl), NOHEAT (dbl), NOHEAT_NUM (dbl), FIX_311 (dbl),
##     NOHOTWATER (dbl), ADDHEAT (dbl), LEAKS (dbl), MOLD (dbl), MUSTY (dbl), ELEVATOR_BROK (dbl), ELEVATOR_ALLBROK (dbl),
##     RODENTS_UNIT (dbl), RODENTS_BUILD (dbl), TOILET_BROK (dbl), ROACHES_NUM (dbl), WALLHOLES (dbl), FLOORHOLES (dbl),
##     PEELPAINT (dbl), PEELPAINT_LARGE (dbl), HPROBCOUNT (dbl), ACUNIT (dbl), AC_OFF (dbl), TEMP_HOT (dbl), ANIMS (dbl),
##     SERVICEANIMAL (dbl), PETTYPE_DOG (dbl), PETTYPE_CAT (dbl), PETTYPE_OTHER (dbl), PA_FOOD (dbl), PA_CASH (dbl),
##     PA_OTHER (dbl), PA_ANY (dbl), FOODINSECURE (dbl), UTIL_ELECTRIC (dbl), UTIL_GAS (dbl), UTIL_HEAT (dbl), UTIL_WATER
##     (dbl), UTIL_INCLUDED (dbl), UTIL_NONE (dbl), UTILCOSTS_SUMMER (dbl), UTILCOSTS_WINTER (dbl), UTILCOSTS_HEAT (dbl),
##     UTILCOSTS_WATER (dbl), MUTIL (dbl), INTERUPT_UTIL (dbl), INTERUPT_PHONE (dbl), INTERUPT_CELL (dbl), INTERUPT_NONE
##     (dbl), HHINC_REC1 (dbl), HUDILFY22 (dbl), HUDILFY23 (dbl), HHPOVERTY (dbl), LEASENOW (dbl), LEASEEVER (dbl),
##     LEASE_LENGTH (dbl), LEASE_START (dbl), RENTASSIST (dbl), RENTASSIST_VOUCHER (dbl), RENTOUTSIDE (dbl), RENTFEES
##     (dbl), RENTFEES_AMOUNT (dbl), RENT_AMOUNT (dbl), GRENT (dbl), RENTPAID (dbl), RENTPAID_AMOUNT (dbl), MISSRENT
##     (dbl), MISSRENT_NUM (dbl), STILL_OWE (dbl), ALTRENT_CREDIT (dbl), ALTRENT_SAVINGS (dbl), ALTRENT_LOAN (dbl),
##     ALTRENT_ASSET (dbl), ALTRENT_OTHER (dbl), ALTRENT_ONEPLUS (dbl), RENTCREDIT_PAIDOFF (dbl), RENTBURDEN_CAT (dbl),
##     INHERIT (dbl), OWNEROUT (dbl), FIRSTTIMEOWNER (dbl), RECENT_DOWNPAY (dbl), HELPDOWNPAY_PROG (dbl), HELPDOWNPAY_GIFT
##     (dbl), HELPDOWNPAY_NONE (dbl), HDEBT_FIRSTMORT (dbl), HDEBT_ADDL (dbl), HDEBT_NONE (dbl), INT_FIRSTMORT (dbl),
##     MFIRSTMORT (dbl), MOWNERCOST (dbl), HINSURE_AMT (dbl), HFLOODINSURE (dbl), HFLOODINSURE_AMT (dbl), HOFINSURE_AMT
##     (dbl), LATEMORTGAGE (dbl), HHMORTDEDUCT (dbl), TOTAL_FIRSTMORT (dbl), ASSESSMENT (dbl), ASSESSMENT_AMT (dbl),
##     CROWD_BDRM (dbl), CROWD_RM (dbl), HHCOVIDDIAG (dbl), NABE_MOVED (dbl), NABENOW_RATE (dbl), NABETHEN_RATE (dbl),
##     SAFETY_RATE (dbl), HHLANG_EN (dbl), HHLANG_SP (dbl), HHLANG_HC (dbl), HHLANG_RU (dbl), HHLANG_BN (dbl), HHLANG_CH
##     (dbl), HHLANG_NONENG (dbl), I_NOHEAT (dbl), I_NOHEAT_NUM (dbl), I_ADDHEAT (dbl), I_LEAKS (dbl), I_RODENTS_UNIT
##     (dbl), I_RODENTS_BUILD (dbl), I_TOILET_BROK (dbl), I_WALLHOLES (dbl), I_FLOORHOLES (dbl), I_PEELPAINT (dbl),
##     I_PEELPAINT_LARGE (dbl), I_UTIL_ELECTRIC (dbl), I_UTIL_GAS (dbl), I_UTIL_HEAT (dbl), I_UTIL_WATER (dbl),
##     I_UTIL_NONE (dbl), I_UTIL_INCLUDED (dbl), I_UTILCOSTS_HEAT (dbl), I_UTILCOSTS_WATER (dbl), I_UTILCOSTS_WINTER
##     (dbl), I_UTILCOSTS_SUMMER (dbl), FLG_I_MUTIL (dbl), FLG_I_HHINC_REC1 (dbl), I_RENTOUTSIDE (dbl), I_RENT_AMOUNT
##     (dbl), I_RENTPAID (dbl), I_RENTPAID_AMOUNT (dbl), FLG_I_GRENT (dbl), I_HDEBT_FIRSTMORT (dbl), I_HDEBT_ADDL (dbl),
##     I_HDEBT_NONE (dbl), FLG_I_MFIRSTMORT (dbl), FLG_INT_FIRSTMORT (dbl), FLG_I_MOWNERCOST (dbl), FLG_TC_MUTIL (dbl),
##     FLG_TC_PA_INC (dbl), FLG_TC_HHINC_REC1 (dbl), FLG_TC_GRENT (dbl), I_TOTAL_FIRSTMORT (dbl), FLG_TC_MORTG (dbl), FW
##     (dbl), FW1 (dbl), FW2 (dbl), FW3 (dbl), FW4 (dbl), FW5 (dbl), FW6 (dbl), FW7 (dbl), FW8 (dbl), FW9 (dbl), FW10
##     (dbl), FW11 (dbl), FW12 (dbl), FW13 (dbl), FW14 (dbl), FW15 (dbl), FW16 (dbl), FW17 (dbl), FW18 (dbl), FW19 (dbl),
##     FW20 (dbl), FW21 (dbl), FW22 (dbl), FW23 (dbl), FW24 (dbl), FW25 (dbl), FW26 (dbl), FW27 (dbl), FW28 (dbl), FW29
##     (dbl), FW30 (dbl), FW31 (dbl), FW32 (dbl), FW33 (dbl), FW34 (dbl), FW35 (dbl), FW36 (dbl), FW37 (dbl), FW38 (dbl),
##     FW39 (dbl), FW40 (dbl), FW41 (dbl), FW42 (dbl), FW43 (dbl), FW44 (dbl), FW45 (dbl), FW46 (dbl), FW47 (dbl), FW48
##     (dbl), FW49 (dbl), FW50 (dbl), FW51 (dbl), FW52 (dbl), FW53 (dbl), FW54 (dbl), FW55 (dbl), FW56 (dbl), FW57 (dbl),
##     FW58 (dbl), FW59 (dbl), FW60 (dbl), FW61 (dbl), FW62 (dbl), FW63 (dbl), FW64 (dbl), FW65 (dbl), FW66 (dbl), FW67
##     (dbl), FW68 (dbl), FW69 (dbl), FW70 (dbl), FW71 (dbl), FW72 (dbl), FW73 (dbl), FW74 (dbl), FW75 (dbl), FW76 (dbl),
##     FW77 (dbl), FW78 (dbl), FW79 (dbl), FW80 (dbl), CSR (chr)</code></pre>
<p>Once the dataset is converted into a replicate-weighted survey design object, R recognizes each observation as part of a complex survey sample rather than as an independent data point. This structure enables design-based analysis, allowing estimates, variances, and confidence intervals to reflect the HVS’s sampling methodology. With this object in place, researchers can use tidyverse-style verbs such as <code>summarize()</code> with functions from <code>srvyr</code> like:</p>
<ul>
<li><code>survey_total()</code> for counts</li>
<li><code>survey_total(col)</code> for sums</li>
<li><code>survey_mean(col)</code> for means</li>
<li><code>survey_median(col)</code> for medians</li>
<li><code>survey_quantile(col, quantiles = x)</code> for other quantiles</li>
<li>Etc.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="querying-nyc-hvs-data.html#cb4-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="querying-nyc-hvs-data.html#cb4-2" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey_rep</span>(</span>
<span id="cb4-3"><a href="querying-nyc-hvs-data.html#cb4-3" tabindex="-1"></a>    <span class="at">weights =</span> FW,</span>
<span id="cb4-4"><a href="querying-nyc-hvs-data.html#cb4-4" tabindex="-1"></a>    <span class="at">repweights =</span> <span class="fu">num_range</span>(<span class="st">&quot;FW&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>),</span>
<span id="cb4-5"><a href="querying-nyc-hvs-data.html#cb4-5" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;other&quot;</span>, </span>
<span id="cb4-6"><a href="querying-nyc-hvs-data.html#cb4-6" tabindex="-1"></a>    <span class="at">combined_weights =</span> <span class="cn">TRUE</span>, </span>
<span id="cb4-7"><a href="querying-nyc-hvs-data.html#cb4-7" tabindex="-1"></a>    <span class="at">scale =</span> <span class="dv">4</span><span class="sc">/</span><span class="dv">80</span>, </span>
<span id="cb4-8"><a href="querying-nyc-hvs-data.html#cb4-8" tabindex="-1"></a>    <span class="at">rscales =</span> <span class="dv">1</span>,</span>
<span id="cb4-9"><a href="querying-nyc-hvs-data.html#cb4-9" tabindex="-1"></a>    <span class="at">mse =</span> <span class="cn">TRUE</span></span>
<span id="cb4-10"><a href="querying-nyc-hvs-data.html#cb4-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb4-11"><a href="querying-nyc-hvs-data.html#cb4-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb4-12"><a href="querying-nyc-hvs-data.html#cb4-12" tabindex="-1"></a>    <span class="at">.by =</span> TENURE,</span>
<span id="cb4-13"><a href="querying-nyc-hvs-data.html#cb4-13" tabindex="-1"></a>    <span class="at">count =</span> srvyr<span class="sc">::</span><span class="fu">survey_total</span>(),</span>
<span id="cb4-14"><a href="querying-nyc-hvs-data.html#cb4-14" tabindex="-1"></a>    <span class="at">median_hhsize =</span> srvyr<span class="sc">::</span><span class="fu">survey_median</span>(HHSIZE)</span>
<span id="cb4-15"><a href="querying-nyc-hvs-data.html#cb4-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb4-16"><a href="querying-nyc-hvs-data.html#cb4-16" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-17"><a href="querying-nyc-hvs-data.html#cb4-17" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">&quot;count&quot;</span>, <span class="st">&quot;median_hhsize&quot;</span>), <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-18"><a href="querying-nyc-hvs-data.html#cb4-18" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">&quot;count_se&quot;</span>, <span class="st">&quot;median_hhsize_se&quot;</span>), <span class="at">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-807a69c6674ce98fd2bd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-807a69c6674ce98fd2bd">{"x":{"filter":"none","vertical":false,"data":[["1","2"],[1,2],[2323523.464126887,1108927.376303281],[18963.06095960531,19724.34920330941],[2,2],[0.2511994509735523,0.2511994509735523]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>TENURE<\/th>\n      <th>count<\/th>\n      <th>count_se<\/th>\n      <th>median_hhsize<\/th>\n      <th>median_hhsize_se<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[1,2,3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"TENURE","targets":1},{"name":"count","targets":2},{"name":"count_se","targets":3},{"name":"median_hhsize","targets":4},{"name":"median_hhsize_se","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render"],"jsHooks":[]}</script>
<hr style="border:2px solid blue">
</div>
<div id="variables" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Variables<a href="querying-nyc-hvs-data.html#variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <a href="https://www.nyc.gov/assets/hpd/downloads/pdfs/about/2023-nychvs-puf-user-guide-codebook.pdf">HVS Codebook</a> is the central reference for identifying, locating, and interpreting variables in the survey. It lists every variable and indicates which of the four datasets it is stored in, making it the first place to look when selecting variables or joining data across files. Because all responses are stored as numeric codes rather than text, the Codebook is also necessary for translating these values into their intended meanings and for avoiding common misreadings that can distort results.</p>
<p><img src="Images/HVS/hvs_guide.png" /></p>
<p>Commonly used variables include the following:</p>
<div id="borough-all-units" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Borough (All Units)<a href="querying-nyc-hvs-data.html#borough-all-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="querying-nyc-hvs-data.html#cb5-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="querying-nyc-hvs-data.html#cb5-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="querying-nyc-hvs-data.html#cb5-3" tabindex="-1"></a>    <span class="at">boro =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb5-4"><a href="querying-nyc-hvs-data.html#cb5-4" tabindex="-1"></a>      BORO <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Bronx&quot;</span>, </span>
<span id="cb5-5"><a href="querying-nyc-hvs-data.html#cb5-5" tabindex="-1"></a>      BORO <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Brooklyn&quot;</span>,</span>
<span id="cb5-6"><a href="querying-nyc-hvs-data.html#cb5-6" tabindex="-1"></a>      BORO <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Manhattan&quot;</span>, </span>
<span id="cb5-7"><a href="querying-nyc-hvs-data.html#cb5-7" tabindex="-1"></a>      BORO <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;Queens&quot;</span>, </span>
<span id="cb5-8"><a href="querying-nyc-hvs-data.html#cb5-8" tabindex="-1"></a>      BORO <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;Staten Island&quot;</span></span>
<span id="cb5-9"><a href="querying-nyc-hvs-data.html#cb5-9" tabindex="-1"></a>    )</span>
<span id="cb5-10"><a href="querying-nyc-hvs-data.html#cb5-10" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="regulatory-status-all-units" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Regulatory Status (All Units)<a href="querying-nyc-hvs-data.html#regulatory-status-all-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="querying-nyc-hvs-data.html#cb6-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="querying-nyc-hvs-data.html#cb6-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="querying-nyc-hvs-data.html#cb6-3" tabindex="-1"></a>    <span class="at">bldg_type =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb6-4"><a href="querying-nyc-hvs-data.html#cb6-4" tabindex="-1"></a>      <span class="co">#Renters</span></span>
<span id="cb6-5"><a href="querying-nyc-hvs-data.html#cb6-5" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;05&quot;</span> <span class="sc">~</span> <span class="st">&quot;NYCHA&quot;</span>,</span>
<span id="cb6-6"><a href="querying-nyc-hvs-data.html#cb6-6" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;32&quot;</span> <span class="sc">~</span> <span class="st">&quot;Rent Stabilized&quot;</span>, </span>
<span id="cb6-7"><a href="querying-nyc-hvs-data.html#cb6-7" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;90&quot;</span> <span class="sc">~</span> <span class="st">&quot;Rent Controlled&quot;</span>,</span>
<span id="cb6-8"><a href="querying-nyc-hvs-data.html#cb6-8" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;97&quot;</span> <span class="sc">~</span> <span class="st">&quot;Other Subsidized/Regulated Rental&quot;</span>, </span>
<span id="cb6-9"><a href="querying-nyc-hvs-data.html#cb6-9" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;80&quot;</span> <span class="sc">~</span> <span class="st">&quot;Private/Unregulated Rental&quot;</span>,</span>
<span id="cb6-10"><a href="querying-nyc-hvs-data.html#cb6-10" tabindex="-1"></a>      <span class="co">#Owners</span></span>
<span id="cb6-11"><a href="querying-nyc-hvs-data.html#cb6-11" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;02&quot;</span> <span class="sc">~</span> <span class="st">&quot;Coop&quot;</span>,</span>
<span id="cb6-12"><a href="querying-nyc-hvs-data.html#cb6-12" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">~</span> <span class="st">&quot;Condo&quot;</span>, </span>
<span id="cb6-13"><a href="querying-nyc-hvs-data.html#cb6-13" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;96&quot;</span> <span class="sc">~</span> <span class="st">&quot;Subsidized/Regulated Owner-Occupied&quot;</span>,</span>
<span id="cb6-14"><a href="querying-nyc-hvs-data.html#cb6-14" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;06&quot;</span> <span class="sc">~</span> <span class="st">&quot;Other Owner-Occupied&quot;</span>,</span>
<span id="cb6-15"><a href="querying-nyc-hvs-data.html#cb6-15" tabindex="-1"></a>      <span class="co">#Vacant</span></span>
<span id="cb6-16"><a href="querying-nyc-hvs-data.html#cb6-16" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;03&quot;</span> <span class="sc">~</span> <span class="st">&quot;Vacant, for Sale&quot;</span>,</span>
<span id="cb6-17"><a href="querying-nyc-hvs-data.html#cb6-17" tabindex="-1"></a>      CSR <span class="sc">==</span> <span class="st">&quot;04&quot;</span> <span class="sc">~</span> <span class="st">&quot;Vacant, not for Sale&quot;</span></span>
<span id="cb6-18"><a href="querying-nyc-hvs-data.html#cb6-18" tabindex="-1"></a>    )</span>
<span id="cb6-19"><a href="querying-nyc-hvs-data.html#cb6-19" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="year-built-all-units" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Year Built (All Units)<a href="querying-nyc-hvs-data.html#year-built-all-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="querying-nyc-hvs-data.html#cb7-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="querying-nyc-hvs-data.html#cb7-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb7-3"><a href="querying-nyc-hvs-data.html#cb7-3" tabindex="-1"></a>    <span class="at">year_built =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb7-4"><a href="querying-nyc-hvs-data.html#cb7-4" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;1900 or earlier&quot;</span>,</span>
<span id="cb7-5"><a href="querying-nyc-hvs-data.html#cb7-5" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;1901 to 1919&quot;</span>,</span>
<span id="cb7-6"><a href="querying-nyc-hvs-data.html#cb7-6" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;1920 to 1929&quot;</span>,</span>
<span id="cb7-7"><a href="querying-nyc-hvs-data.html#cb7-7" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;1930 to 1946&quot;</span>,</span>
<span id="cb7-8"><a href="querying-nyc-hvs-data.html#cb7-8" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;1947 to 1959&quot;</span>,</span>
<span id="cb7-9"><a href="querying-nyc-hvs-data.html#cb7-9" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;1960 to 1973&quot;</span>,</span>
<span id="cb7-10"><a href="querying-nyc-hvs-data.html#cb7-10" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">7</span> <span class="sc">~</span> <span class="st">&quot;1974 to 1979&quot;</span>,</span>
<span id="cb7-11"><a href="querying-nyc-hvs-data.html#cb7-11" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">8</span> <span class="sc">~</span> <span class="st">&quot;1980 to 1989&quot;</span>,</span>
<span id="cb7-12"><a href="querying-nyc-hvs-data.html#cb7-12" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span>  <span class="dv">9</span> <span class="sc">~</span> <span class="st">&quot;1990 to 1999&quot;</span>,</span>
<span id="cb7-13"><a href="querying-nyc-hvs-data.html#cb7-13" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;2000 to 2009&quot;</span>,</span>
<span id="cb7-14"><a href="querying-nyc-hvs-data.html#cb7-14" tabindex="-1"></a>      YEARBUILT <span class="sc">==</span> <span class="dv">11</span> <span class="sc">~</span> <span class="st">&quot;2010 or later&quot;</span></span>
<span id="cb7-15"><a href="querying-nyc-hvs-data.html#cb7-15" tabindex="-1"></a>    )</span>
<span id="cb7-16"><a href="querying-nyc-hvs-data.html#cb7-16" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="units-in-building-all-units" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Units in Building (All Units)<a href="querying-nyc-hvs-data.html#units-in-building-all-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="querying-nyc-hvs-data.html#cb8-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="querying-nyc-hvs-data.html#cb8-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb8-3"><a href="querying-nyc-hvs-data.html#cb8-3" tabindex="-1"></a>    <span class="at">units =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb8-4"><a href="querying-nyc-hvs-data.html#cb8-4" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;1 unit&quot;</span>,</span>
<span id="cb8-5"><a href="querying-nyc-hvs-data.html#cb8-5" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;2 units&quot;</span>,</span>
<span id="cb8-6"><a href="querying-nyc-hvs-data.html#cb8-6" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;3 units&quot;</span>,</span>
<span id="cb8-7"><a href="querying-nyc-hvs-data.html#cb8-7" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;4-5 units&quot;</span>,</span>
<span id="cb8-8"><a href="querying-nyc-hvs-data.html#cb8-8" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;6-9 units&quot;</span>,</span>
<span id="cb8-9"><a href="querying-nyc-hvs-data.html#cb8-9" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;10-12 units&quot;</span>,</span>
<span id="cb8-10"><a href="querying-nyc-hvs-data.html#cb8-10" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">7</span> <span class="sc">~</span> <span class="st">&quot;13-19 units&quot;</span>,</span>
<span id="cb8-11"><a href="querying-nyc-hvs-data.html#cb8-11" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">8</span> <span class="sc">~</span> <span class="st">&quot;20-49 units&quot;</span>,</span>
<span id="cb8-12"><a href="querying-nyc-hvs-data.html#cb8-12" tabindex="-1"></a>      UNITS <span class="sc">==</span>  <span class="dv">9</span> <span class="sc">~</span> <span class="st">&quot;50-99 units&quot;</span>,</span>
<span id="cb8-13"><a href="querying-nyc-hvs-data.html#cb8-13" tabindex="-1"></a>      UNITS <span class="sc">==</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;100+ units&quot;</span></span>
<span id="cb8-14"><a href="querying-nyc-hvs-data.html#cb8-14" tabindex="-1"></a>    )</span>
<span id="cb8-15"><a href="querying-nyc-hvs-data.html#cb8-15" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="coopcondos-all-units" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Coop/Condos (All Units)<a href="querying-nyc-hvs-data.html#coopcondos-all-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="querying-nyc-hvs-data.html#cb9-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="querying-nyc-hvs-data.html#cb9-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb9-3"><a href="querying-nyc-hvs-data.html#cb9-3" tabindex="-1"></a>    <span class="at">coop_condo =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb9-4"><a href="querying-nyc-hvs-data.html#cb9-4" tabindex="-1"></a>      CONDOCOOP <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Not reported&quot;</span>,</span>
<span id="cb9-5"><a href="querying-nyc-hvs-data.html#cb9-5" tabindex="-1"></a>      CONDOCOOP <span class="sc">==</span>  <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Condo&quot;</span>,</span>
<span id="cb9-6"><a href="querying-nyc-hvs-data.html#cb9-6" tabindex="-1"></a>      CONDOCOOP <span class="sc">==</span>  <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Coop&quot;</span>,</span>
<span id="cb9-7"><a href="querying-nyc-hvs-data.html#cb9-7" tabindex="-1"></a>      CONDOCOOP <span class="sc">==</span>  <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Neither condo nor coop&quot;</span></span>
<span id="cb9-8"><a href="querying-nyc-hvs-data.html#cb9-8" tabindex="-1"></a>    )</span>
<span id="cb9-9"><a href="querying-nyc-hvs-data.html#cb9-9" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="occupancy-all-units" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Occupancy (All Units)<a href="querying-nyc-hvs-data.html#occupancy-all-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="querying-nyc-hvs-data.html#cb10-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="querying-nyc-hvs-data.html#cb10-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb10-3"><a href="querying-nyc-hvs-data.html#cb10-3" tabindex="-1"></a>    <span class="at">occupancy =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb10-4"><a href="querying-nyc-hvs-data.html#cb10-4" tabindex="-1"></a>      OCC <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Occupied&quot;</span>,</span>
<span id="cb10-5"><a href="querying-nyc-hvs-data.html#cb10-5" tabindex="-1"></a>      OCC <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Vacant, available for rent&quot;</span>,</span>
<span id="cb10-6"><a href="querying-nyc-hvs-data.html#cb10-6" tabindex="-1"></a>      OCC <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Vacant, not available for rent or sale&quot;</span></span>
<span id="cb10-7"><a href="querying-nyc-hvs-data.html#cb10-7" tabindex="-1"></a>    )</span>
<span id="cb10-8"><a href="querying-nyc-hvs-data.html#cb10-8" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="tenure-occupied" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Tenure (Occupied)<a href="querying-nyc-hvs-data.html#tenure-occupied" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="querying-nyc-hvs-data.html#cb11-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="querying-nyc-hvs-data.html#cb11-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb11-3"><a href="querying-nyc-hvs-data.html#cb11-3" tabindex="-1"></a>    <span class="at">tenure =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb11-4"><a href="querying-nyc-hvs-data.html#cb11-4" tabindex="-1"></a>      TENURE <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Renter&quot;</span>,</span>
<span id="cb11-5"><a href="querying-nyc-hvs-data.html#cb11-5" tabindex="-1"></a>      TENURE <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Owner&quot;</span></span>
<span id="cb11-6"><a href="querying-nyc-hvs-data.html#cb11-6" tabindex="-1"></a>    )</span>
<span id="cb11-7"><a href="querying-nyc-hvs-data.html#cb11-7" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="household-income-occupied" class="section level3 hasAnchor" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> Household Income (Occupied)<a href="querying-nyc-hvs-data.html#household-income-occupied" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="querying-nyc-hvs-data.html#cb12-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="querying-nyc-hvs-data.html#cb12-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb12-3"><a href="querying-nyc-hvs-data.html#cb12-3" tabindex="-1"></a>    <span class="co">#Range of values is -$40,000 to $500,000,000 </span></span>
<span id="cb12-4"><a href="querying-nyc-hvs-data.html#cb12-4" tabindex="-1"></a>    <span class="at">hh_income =</span> HHINC_REC1</span>
<span id="cb12-5"><a href="querying-nyc-hvs-data.html#cb12-5" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="rent-occupied" class="section level3 hasAnchor" number="5.2.9">
<h3><span class="header-section-number">5.2.9</span> Rent (Occupied)<a href="querying-nyc-hvs-data.html#rent-occupied" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="querying-nyc-hvs-data.html#cb13-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="querying-nyc-hvs-data.html#cb13-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb13-3"><a href="querying-nyc-hvs-data.html#cb13-3" tabindex="-1"></a>    <span class="co">#Range of values is -2 (NA/owner-occupied) to $7,500</span></span>
<span id="cb13-4"><a href="querying-nyc-hvs-data.html#cb13-4" tabindex="-1"></a>    <span class="at">rent =</span> RENT_AMOUNT </span>
<span id="cb13-5"><a href="querying-nyc-hvs-data.html#cb13-5" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="voucher-use-occupied" class="section level3 hasAnchor" number="5.2.10">
<h3><span class="header-section-number">5.2.10</span> Voucher Use (Occupied)<a href="querying-nyc-hvs-data.html#voucher-use-occupied" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="querying-nyc-hvs-data.html#cb14-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="querying-nyc-hvs-data.html#cb14-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb14-3"><a href="querying-nyc-hvs-data.html#cb14-3" tabindex="-1"></a>    <span class="at">voucher =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb14-4"><a href="querying-nyc-hvs-data.html#cb14-4" tabindex="-1"></a>      RENTASSIST_VOUCHER <span class="sc">==</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Not applicable (owner)&quot;</span>,</span>
<span id="cb14-5"><a href="querying-nyc-hvs-data.html#cb14-5" tabindex="-1"></a>      RENTASSIST_VOUCHER <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Not reported&quot;</span>,</span>
<span id="cb14-6"><a href="querying-nyc-hvs-data.html#cb14-6" tabindex="-1"></a>      RENTASSIST_VOUCHER <span class="sc">==</span>  <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Has Section 8 / Housing Choice Voucher&quot;</span>,</span>
<span id="cb14-7"><a href="querying-nyc-hvs-data.html#cb14-7" tabindex="-1"></a>      RENTASSIST_VOUCHER <span class="sc">==</span>  <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;No Section 8 or Housing Choice Voucher&quot;</span></span>
<span id="cb14-8"><a href="querying-nyc-hvs-data.html#cb14-8" tabindex="-1"></a>    )</span>
<span id="cb14-9"><a href="querying-nyc-hvs-data.html#cb14-9" tabindex="-1"></a>  )</span></code></pre></div>
<hr style="border:2px solid blue">
</div>
</div>
<div id="examples" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Examples<a href="querying-nyc-hvs-data.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="count-of-vacancy-and-tenure" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> <strong>Count</strong> of Vacancy and Tenure<a href="querying-nyc-hvs-data.html#count-of-vacancy-and-tenure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="querying-nyc-hvs-data.html#cb15-1" tabindex="-1"></a>all23 <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="querying-nyc-hvs-data.html#cb15-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb15-3"><a href="querying-nyc-hvs-data.html#cb15-3" tabindex="-1"></a>    <span class="at">occupancy =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb15-4"><a href="querying-nyc-hvs-data.html#cb15-4" tabindex="-1"></a>      OCC <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Occupied&quot;</span>,</span>
<span id="cb15-5"><a href="querying-nyc-hvs-data.html#cb15-5" tabindex="-1"></a>      OCC <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Vacant, available for rent&quot;</span>,</span>
<span id="cb15-6"><a href="querying-nyc-hvs-data.html#cb15-6" tabindex="-1"></a>      OCC <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Vacant, not available for rent or sale&quot;</span></span>
<span id="cb15-7"><a href="querying-nyc-hvs-data.html#cb15-7" tabindex="-1"></a>    )</span>
<span id="cb15-8"><a href="querying-nyc-hvs-data.html#cb15-8" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="querying-nyc-hvs-data.html#cb15-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb15-10"><a href="querying-nyc-hvs-data.html#cb15-10" tabindex="-1"></a>    occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="querying-nyc-hvs-data.html#cb15-11" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">transmute</span>(</span>
<span id="cb15-12"><a href="querying-nyc-hvs-data.html#cb15-12" tabindex="-1"></a>        CONTROL,</span>
<span id="cb15-13"><a href="querying-nyc-hvs-data.html#cb15-13" tabindex="-1"></a>        <span class="at">tenure =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb15-14"><a href="querying-nyc-hvs-data.html#cb15-14" tabindex="-1"></a>          TENURE <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Renter&quot;</span>,</span>
<span id="cb15-15"><a href="querying-nyc-hvs-data.html#cb15-15" tabindex="-1"></a>          TENURE <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Owner&quot;</span></span>
<span id="cb15-16"><a href="querying-nyc-hvs-data.html#cb15-16" tabindex="-1"></a>        )</span>
<span id="cb15-17"><a href="querying-nyc-hvs-data.html#cb15-17" tabindex="-1"></a>      ),</span>
<span id="cb15-18"><a href="querying-nyc-hvs-data.html#cb15-18" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">&quot;CONTROL&quot;</span></span>
<span id="cb15-19"><a href="querying-nyc-hvs-data.html#cb15-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-20"><a href="querying-nyc-hvs-data.html#cb15-20" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb15-21"><a href="querying-nyc-hvs-data.html#cb15-21" tabindex="-1"></a>    <span class="at">status =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb15-22"><a href="querying-nyc-hvs-data.html#cb15-22" tabindex="-1"></a>      tenure <span class="sc">==</span> <span class="st">&quot;Owner&quot;</span>                          <span class="sc">~</span> <span class="st">&quot;Occupied, owner&quot;</span>,</span>
<span id="cb15-23"><a href="querying-nyc-hvs-data.html#cb15-23" tabindex="-1"></a>      tenure <span class="sc">==</span> <span class="st">&quot;Renter&quot;</span>                         <span class="sc">~</span> <span class="st">&quot;Occupied, renter&quot;</span>,</span>
<span id="cb15-24"><a href="querying-nyc-hvs-data.html#cb15-24" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_detect</span>(occupancy, <span class="st">&quot;^Vacant,&quot;</span>) <span class="sc">~</span> occupancy</span>
<span id="cb15-25"><a href="querying-nyc-hvs-data.html#cb15-25" tabindex="-1"></a>    )</span>
<span id="cb15-26"><a href="querying-nyc-hvs-data.html#cb15-26" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-27"><a href="querying-nyc-hvs-data.html#cb15-27" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey_rep</span>(</span>
<span id="cb15-28"><a href="querying-nyc-hvs-data.html#cb15-28" tabindex="-1"></a>    <span class="at">weights =</span> FW,</span>
<span id="cb15-29"><a href="querying-nyc-hvs-data.html#cb15-29" tabindex="-1"></a>    <span class="at">repweights =</span> <span class="fu">num_range</span>(<span class="st">&quot;FW&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>),</span>
<span id="cb15-30"><a href="querying-nyc-hvs-data.html#cb15-30" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;other&quot;</span>, </span>
<span id="cb15-31"><a href="querying-nyc-hvs-data.html#cb15-31" tabindex="-1"></a>    <span class="at">combined_weights =</span> <span class="cn">TRUE</span>, </span>
<span id="cb15-32"><a href="querying-nyc-hvs-data.html#cb15-32" tabindex="-1"></a>    <span class="at">scale =</span> <span class="dv">4</span><span class="sc">/</span><span class="dv">80</span>, </span>
<span id="cb15-33"><a href="querying-nyc-hvs-data.html#cb15-33" tabindex="-1"></a>    <span class="at">rscales =</span> <span class="dv">1</span>,</span>
<span id="cb15-34"><a href="querying-nyc-hvs-data.html#cb15-34" tabindex="-1"></a>    <span class="at">mse =</span> <span class="cn">TRUE</span></span>
<span id="cb15-35"><a href="querying-nyc-hvs-data.html#cb15-35" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-36"><a href="querying-nyc-hvs-data.html#cb15-36" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb15-37"><a href="querying-nyc-hvs-data.html#cb15-37" tabindex="-1"></a>    <span class="at">.by =</span> status,</span>
<span id="cb15-38"><a href="querying-nyc-hvs-data.html#cb15-38" tabindex="-1"></a>    <span class="at">n =</span> srvyr<span class="sc">::</span><span class="fu">survey_total</span>(<span class="at">vartype =</span> <span class="st">&quot;ci&quot;</span>)</span>
<span id="cb15-39"><a href="querying-nyc-hvs-data.html#cb15-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-40"><a href="querying-nyc-hvs-data.html#cb15-40" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-41"><a href="querying-nyc-hvs-data.html#cb15-41" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">formatRound</span>(<span class="fu">c</span>(<span class="st">&quot;n&quot;</span>, <span class="st">&quot;n_low&quot;</span>, <span class="st">&quot;n_upp&quot;</span>), <span class="at">digits =</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-d8b91e26994622b44830" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d8b91e26994622b44830">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["Occupied, owner","Occupied, renter","Vacant, available for rent","Vacant, not available for rent or sale"],[1108927.376303281,2323523.464126887,33214.133123615,239586.026442653],[1069667.041284901,2285778.435453234,25995.5535163803,220972.7943516281],[1148187.711321661,2361268.49280054,40432.71273084971,258199.2585336779]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>status<\/th>\n      <th>n<\/th>\n      <th>n_low<\/th>\n      <th>n_upp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"status","targets":1},{"name":"n","targets":2},{"name":"n_low","targets":3},{"name":"n_upp","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render"],"jsHooks":[]}</script>
</div>
<div id="median-rent-by-regulation" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> <strong>Median Rent</strong> by Regulation<a href="querying-nyc-hvs-data.html#median-rent-by-regulation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="querying-nyc-hvs-data.html#cb16-1" tabindex="-1"></a>occ23 <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="querying-nyc-hvs-data.html#cb16-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb16-3"><a href="querying-nyc-hvs-data.html#cb16-3" tabindex="-1"></a>    <span class="co">#Renters</span></span>
<span id="cb16-4"><a href="querying-nyc-hvs-data.html#cb16-4" tabindex="-1"></a>    TENURE <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb16-5"><a href="querying-nyc-hvs-data.html#cb16-5" tabindex="-1"></a>    <span class="co">#Rent Reported</span></span>
<span id="cb16-6"><a href="querying-nyc-hvs-data.html#cb16-6" tabindex="-1"></a>    RENT_AMOUNT <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb16-7"><a href="querying-nyc-hvs-data.html#cb16-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="querying-nyc-hvs-data.html#cb16-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb16-9"><a href="querying-nyc-hvs-data.html#cb16-9" tabindex="-1"></a>    all23 <span class="sc">%&gt;%</span> </span>
<span id="cb16-10"><a href="querying-nyc-hvs-data.html#cb16-10" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">transmute</span>(</span>
<span id="cb16-11"><a href="querying-nyc-hvs-data.html#cb16-11" tabindex="-1"></a>        CONTROL,</span>
<span id="cb16-12"><a href="querying-nyc-hvs-data.html#cb16-12" tabindex="-1"></a>        <span class="at">bldg_type =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb16-13"><a href="querying-nyc-hvs-data.html#cb16-13" tabindex="-1"></a>          <span class="co">#Renters</span></span>
<span id="cb16-14"><a href="querying-nyc-hvs-data.html#cb16-14" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;05&quot;</span> <span class="sc">~</span> <span class="st">&quot;NYCHA&quot;</span>,</span>
<span id="cb16-15"><a href="querying-nyc-hvs-data.html#cb16-15" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;32&quot;</span> <span class="sc">~</span> <span class="st">&quot;Rent Stabilized&quot;</span>, </span>
<span id="cb16-16"><a href="querying-nyc-hvs-data.html#cb16-16" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;90&quot;</span> <span class="sc">~</span> <span class="st">&quot;Rent Controlled&quot;</span>,</span>
<span id="cb16-17"><a href="querying-nyc-hvs-data.html#cb16-17" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;97&quot;</span> <span class="sc">~</span> <span class="st">&quot;Other Subsidized/Regulated&quot;</span>, </span>
<span id="cb16-18"><a href="querying-nyc-hvs-data.html#cb16-18" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;80&quot;</span> <span class="sc">~</span> <span class="st">&quot;Private/Unregulated&quot;</span>,</span>
<span id="cb16-19"><a href="querying-nyc-hvs-data.html#cb16-19" tabindex="-1"></a>          <span class="co">#Owners</span></span>
<span id="cb16-20"><a href="querying-nyc-hvs-data.html#cb16-20" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;02&quot;</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb16-21"><a href="querying-nyc-hvs-data.html#cb16-21" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">~</span> <span class="cn">NA_character_</span>, </span>
<span id="cb16-22"><a href="querying-nyc-hvs-data.html#cb16-22" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;96&quot;</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb16-23"><a href="querying-nyc-hvs-data.html#cb16-23" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;06&quot;</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb16-24"><a href="querying-nyc-hvs-data.html#cb16-24" tabindex="-1"></a>          <span class="co">#Vacant</span></span>
<span id="cb16-25"><a href="querying-nyc-hvs-data.html#cb16-25" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;03&quot;</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb16-26"><a href="querying-nyc-hvs-data.html#cb16-26" tabindex="-1"></a>          CSR <span class="sc">==</span> <span class="st">&quot;04&quot;</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb16-27"><a href="querying-nyc-hvs-data.html#cb16-27" tabindex="-1"></a>        )</span>
<span id="cb16-28"><a href="querying-nyc-hvs-data.html#cb16-28" tabindex="-1"></a>      ),</span>
<span id="cb16-29"><a href="querying-nyc-hvs-data.html#cb16-29" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">&quot;CONTROL&quot;</span></span>
<span id="cb16-30"><a href="querying-nyc-hvs-data.html#cb16-30" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-31"><a href="querying-nyc-hvs-data.html#cb16-31" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey_rep</span>(</span>
<span id="cb16-32"><a href="querying-nyc-hvs-data.html#cb16-32" tabindex="-1"></a>    <span class="at">weights =</span> FW,</span>
<span id="cb16-33"><a href="querying-nyc-hvs-data.html#cb16-33" tabindex="-1"></a>    <span class="at">repweights =</span> <span class="fu">num_range</span>(<span class="st">&quot;FW&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>),</span>
<span id="cb16-34"><a href="querying-nyc-hvs-data.html#cb16-34" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;other&quot;</span>, </span>
<span id="cb16-35"><a href="querying-nyc-hvs-data.html#cb16-35" tabindex="-1"></a>    <span class="at">combined_weights =</span> <span class="cn">TRUE</span>, </span>
<span id="cb16-36"><a href="querying-nyc-hvs-data.html#cb16-36" tabindex="-1"></a>    <span class="at">scale =</span> <span class="dv">4</span><span class="sc">/</span><span class="dv">80</span>, </span>
<span id="cb16-37"><a href="querying-nyc-hvs-data.html#cb16-37" tabindex="-1"></a>    <span class="at">rscales =</span> <span class="dv">1</span>,</span>
<span id="cb16-38"><a href="querying-nyc-hvs-data.html#cb16-38" tabindex="-1"></a>    <span class="at">mse =</span> <span class="cn">TRUE</span></span>
<span id="cb16-39"><a href="querying-nyc-hvs-data.html#cb16-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-40"><a href="querying-nyc-hvs-data.html#cb16-40" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb16-41"><a href="querying-nyc-hvs-data.html#cb16-41" tabindex="-1"></a>    <span class="at">.by =</span> bldg_type,</span>
<span id="cb16-42"><a href="querying-nyc-hvs-data.html#cb16-42" tabindex="-1"></a>    <span class="at">median_rent =</span> srvyr<span class="sc">::</span><span class="fu">survey_median</span>(RENT_AMOUNT)</span>
<span id="cb16-43"><a href="querying-nyc-hvs-data.html#cb16-43" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-44"><a href="querying-nyc-hvs-data.html#cb16-44" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb16-45"><a href="querying-nyc-hvs-data.html#cb16-45" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb16-46"><a href="querying-nyc-hvs-data.html#cb16-46" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">reorder</span>(bldg_type, median_rent),</span>
<span id="cb16-47"><a href="querying-nyc-hvs-data.html#cb16-47" tabindex="-1"></a>      <span class="at">y =</span> median_rent,</span>
<span id="cb16-48"><a href="querying-nyc-hvs-data.html#cb16-48" tabindex="-1"></a>      <span class="at">ymin =</span> median_rent <span class="sc">-</span> median_rent_se,</span>
<span id="cb16-49"><a href="querying-nyc-hvs-data.html#cb16-49" tabindex="-1"></a>      <span class="at">ymax =</span> median_rent <span class="sc">+</span> median_rent_se</span>
<span id="cb16-50"><a href="querying-nyc-hvs-data.html#cb16-50" tabindex="-1"></a>    )</span>
<span id="cb16-51"><a href="querying-nyc-hvs-data.html#cb16-51" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb16-52"><a href="querying-nyc-hvs-data.html#cb16-52" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;dodgerblue3&quot;</span>) <span class="sc">+</span> </span>
<span id="cb16-53"><a href="querying-nyc-hvs-data.html#cb16-53" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb16-54"><a href="querying-nyc-hvs-data.html#cb16-54" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb16-55"><a href="querying-nyc-hvs-data.html#cb16-55" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb16-56"><a href="querying-nyc-hvs-data.html#cb16-56" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2500</span>),</span>
<span id="cb16-57"><a href="querying-nyc-hvs-data.html#cb16-57" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2500</span>, <span class="dv">250</span>),</span>
<span id="cb16-58"><a href="querying-nyc-hvs-data.html#cb16-58" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb16-59"><a href="querying-nyc-hvs-data.html#cb16-59" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb16-60"><a href="querying-nyc-hvs-data.html#cb16-60" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-61"><a href="querying-nyc-hvs-data.html#cb16-61" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Median Rent by Rental Type&quot;</span>,</span>
<span id="cb16-62"><a href="querying-nyc-hvs-data.html#cb16-62" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Type of Rental Unit&quot;</span>,</span>
<span id="cb16-63"><a href="querying-nyc-hvs-data.html#cb16-63" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Median Rent (2023$)&quot;</span>,</span>
<span id="cb16-64"><a href="querying-nyc-hvs-data.html#cb16-64" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;NYC Housing Vacancy Survey, 2023.&quot;</span></span>
<span id="cb16-65"><a href="querying-nyc-hvs-data.html#cb16-65" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb16-66"><a href="querying-nyc-hvs-data.html#cb16-66" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-40-1.png" width="100%" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="querying-decennial-and-acs-data-with-tidycensus.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="querying-microdata-with-ipums.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
