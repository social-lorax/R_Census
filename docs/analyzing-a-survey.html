<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Analyzing a Survey | Guide to Using Census Data</title>
  <meta name="description" content="This guide provides an overview of using the U.S. Census Bureau’s data." />
  <meta name="generator" content="bookdown 0.45 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Analyzing a Survey | Guide to Using Census Data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This guide provides an overview of using the U.S. Census Bureau’s data." />
  <meta name="github-repo" content="social-lorax" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Analyzing a Survey | Guide to Using Census Data" />
  
  <meta name="twitter:description" content="This guide provides an overview of using the U.S. Census Bureau’s data." />
  

<meta name="author" content="Ryan Brenner" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="querying-microdata-with-ipums.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Census Data</a></li>
<li class="chapter" data-level="2" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html"><i class="fa fa-check"></i><b>2</b> Understanding Census Geographies</a>
<ul>
<li class="chapter" data-level="2.1" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#nested-geographies"><i class="fa fa-check"></i><b>2.1</b> Nested Geographies</a></li>
<li class="chapter" data-level="2.2" data-path="understanding-census-geographies.html"><a href="understanding-census-geographies.html#non-nesting-geographies"><i class="fa fa-check"></i><b>2.2</b> Non-Nesting Geographies</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="comparing-geographies-across-time.html"><a href="comparing-geographies-across-time.html"><i class="fa fa-check"></i><b>3</b> Comparing Geographies Across Time</a></li>
<li class="chapter" data-level="4" data-path="querying-decennial-and-acs-data-with-tidycensus.html"><a href="querying-decennial-and-acs-data-with-tidycensus.html"><i class="fa fa-check"></i><b>4</b> Querying Decennial and ACS Data with <code>tidycensus</code></a></li>
<li class="chapter" data-level="5" data-path="querying-nyc-housing-vacancy-survey-hvs-data.html"><a href="querying-nyc-housing-vacancy-survey-hvs-data.html"><i class="fa fa-check"></i><b>5</b> Querying NYC Housing Vacancy Survey (HVS) Data</a></li>
<li class="chapter" data-level="6" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html"><i class="fa fa-check"></i><b>6</b> Querying Microdata with IPUMS</a>
<ul>
<li class="chapter" data-level="6.1" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#extracting-data"><i class="fa fa-check"></i><b>6.1</b> Extracting Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#select-samples"><i class="fa fa-check"></i><b>6.1.1</b> Select Samples</a></li>
<li class="chapter" data-level="6.1.2" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#select-geography"><i class="fa fa-check"></i><b>6.1.2</b> Select Geography</a></li>
<li class="chapter" data-level="6.1.3" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#select-variables"><i class="fa fa-check"></i><b>6.1.3</b> Select Variables</a></li>
<li class="chapter" data-level="6.1.4" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#view-data-cart"><i class="fa fa-check"></i><b>6.1.4</b> View Data Cart</a></li>
<li class="chapter" data-level="6.1.5" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#modify-extract"><i class="fa fa-check"></i><b>6.1.5</b> Modify Extract</a></li>
<li class="chapter" data-level="6.1.6" data-path="querying-microdata-with-ipums.html"><a href="querying-microdata-with-ipums.html#download"><i class="fa fa-check"></i><b>6.1.6</b> Download</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="analyzing-a-survey.html"><a href="analyzing-a-survey.html"><i class="fa fa-check"></i><b>7</b> Analyzing a Survey</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Guide to Using Census Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="analyzing-a-survey" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> Analyzing a Survey<a href="analyzing-a-survey.html#analyzing-a-survey" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<hr />
<p>Unlike the ACS, which provides cleaned estimates with margins of error, IPUMS is messy survey data that must be processed before producing estimates. However, unlike the NYC Housing and Vacancy Survey which has dozens of replicate weights to account for, IPUMS is much easier to work with. All that is needed is to create a survey object with the weight specified as either the household or person weight. (Note: IPUMS data is always provided at the person-level where each row represents a person. This is true even if all of the variables selected are household-level variables - in which case the household-level variables are repeated across all individuals in the household. When using person-level variables, use all records and the <code>PERWT</code> weight; when using household-level variables, first select only one row per household/<code>SERIAL</code> and then use the <code>HHWT</code> weight.)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="analyzing-a-survey.html#cb6-1" tabindex="-1"></a><span class="co">#Household-level data</span></span>
<span id="cb6-2"><a href="analyzing-a-survey.html#cb6-2" tabindex="-1"></a>ipums_hh_data <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="analyzing-a-survey.html#cb6-3" tabindex="-1"></a>  <span class="co">#Select one row per household</span></span>
<span id="cb6-4"><a href="analyzing-a-survey.html#cb6-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(SERIAL, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="analyzing-a-survey.html#cb6-5" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey</span>(<span class="at">weights =</span> HHWT)</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="analyzing-a-survey.html#cb7-1" tabindex="-1"></a><span class="co">#Person-level data</span></span>
<span id="cb7-2"><a href="analyzing-a-survey.html#cb7-2" tabindex="-1"></a>ipums_ind_data <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="analyzing-a-survey.html#cb7-3" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey</span>(<span class="at">weights =</span> PERWT)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="analyzing-a-survey.html#cb8-1" tabindex="-1"></a><span class="co">#Mixed data</span></span>
<span id="cb8-2"><a href="analyzing-a-survey.html#cb8-2" tabindex="-1"></a>ipums_mix_data <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="analyzing-a-survey.html#cb8-3" tabindex="-1"></a>  <span class="co">#Select specific row per household, in this case Head of Household</span></span>
<span id="cb8-4"><a href="analyzing-a-survey.html#cb8-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(RELATE <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="analyzing-a-survey.html#cb8-5" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey</span>(<span class="at">weights =</span> HHWT)</span></code></pre></div>
<p><br></p>
<p>Once the survey object is created, <code>srvyr</code> has a series of functions that calculate estimates with margins of error.</p>
<ul>
<li><code>survey_total()</code> for counts</li>
<li><code>survey_total(col)</code> for sums</li>
<li><code>survey_mean(col)</code> for means</li>
<li><code>survey_median(col)</code> for medians</li>
<li><code>survey_quantile(col, quantiles = x)</code> for other quantiles</li>
<li>Etc.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="analyzing-a-survey.html#cb9-1" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;C:/Users/brenner/Documents/GitHub/R_Census/Data/nyc_micro_rent.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="analyzing-a-survey.html#cb9-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(SERIAL, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="analyzing-a-survey.html#cb9-3" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey</span>(<span class="at">weights =</span> HHWT) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="analyzing-a-survey.html#cb9-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb9-5"><a href="analyzing-a-survey.html#cb9-5" tabindex="-1"></a>    <span class="at">median_rent =</span> srvyr<span class="sc">::</span><span class="fu">survey_median</span>(RENTGRS, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-6"><a href="analyzing-a-survey.html#cb9-6" tabindex="-1"></a>    <span class="at">mean_rent =</span> srvyr<span class="sc">::</span><span class="fu">survey_mean</span>(RENTGRS, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-7"><a href="analyzing-a-survey.html#cb9-7" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   median_rent median_rent_se mean_rent mean_rent_se
##         &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
## 1        1730           15.8     2015.         15.1</code></pre>
<p><br></p>
<p>When grouping, <code>summarize()</code> fails with multiple <code>.by</code> arguments, so multiple grouping variables should be concatenated before summarizing.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="analyzing-a-survey.html#cb11-1" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;C:/Users/brenner/Documents/GitHub/R_Census/Data/nyc_micro_rent.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="analyzing-a-survey.html#cb11-2" tabindex="-1"></a>  <span class="co">#Create new variables</span></span>
<span id="cb11-3"><a href="analyzing-a-survey.html#cb11-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">transmute</span>(</span>
<span id="cb11-4"><a href="analyzing-a-survey.html#cb11-4" tabindex="-1"></a>    <span class="at">household =</span> SERIAL,</span>
<span id="cb11-5"><a href="analyzing-a-survey.html#cb11-5" tabindex="-1"></a>    HHWT,</span>
<span id="cb11-6"><a href="analyzing-a-survey.html#cb11-6" tabindex="-1"></a>    <span class="at">borough =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb11-7"><a href="analyzing-a-survey.html#cb11-7" tabindex="-1"></a>      COUNTYFIP <span class="sc">==</span> <span class="dv">5</span>  <span class="sc">~</span> <span class="st">&quot;Bronx&quot;</span>,</span>
<span id="cb11-8"><a href="analyzing-a-survey.html#cb11-8" tabindex="-1"></a>      COUNTYFIP <span class="sc">==</span> <span class="dv">47</span> <span class="sc">~</span> <span class="st">&quot;Brooklyn&quot;</span>,</span>
<span id="cb11-9"><a href="analyzing-a-survey.html#cb11-9" tabindex="-1"></a>      COUNTYFIP <span class="sc">==</span> <span class="dv">61</span> <span class="sc">~</span> <span class="st">&quot;Manhattan&quot;</span>,</span>
<span id="cb11-10"><a href="analyzing-a-survey.html#cb11-10" tabindex="-1"></a>      COUNTYFIP <span class="sc">==</span> <span class="dv">81</span> <span class="sc">~</span> <span class="st">&quot;Queens&quot;</span>,</span>
<span id="cb11-11"><a href="analyzing-a-survey.html#cb11-11" tabindex="-1"></a>      COUNTYFIP <span class="sc">==</span> <span class="dv">85</span> <span class="sc">~</span> <span class="st">&quot;Staten_Island&quot;</span></span>
<span id="cb11-12"><a href="analyzing-a-survey.html#cb11-12" tabindex="-1"></a>    ),</span>
<span id="cb11-13"><a href="analyzing-a-survey.html#cb11-13" tabindex="-1"></a>    <span class="at">rent =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb11-14"><a href="analyzing-a-survey.html#cb11-14" tabindex="-1"></a>      RENTGRS <span class="sc">&lt;</span>  <span class="dv">1000</span> <span class="sc">~</span> <span class="st">&quot;Super Low&quot;</span>,</span>
<span id="cb11-15"><a href="analyzing-a-survey.html#cb11-15" tabindex="-1"></a>      RENTGRS <span class="sc">&lt;</span>  <span class="dv">1700</span> <span class="sc">~</span> <span class="st">&quot;Below Median&quot;</span>,</span>
<span id="cb11-16"><a href="analyzing-a-survey.html#cb11-16" tabindex="-1"></a>      RENTGRS <span class="sc">&lt;</span>  <span class="dv">5000</span> <span class="sc">~</span> <span class="st">&quot;Above Median&quot;</span>,</span>
<span id="cb11-17"><a href="analyzing-a-survey.html#cb11-17" tabindex="-1"></a>      RENTGRS <span class="sc">&gt;=</span> <span class="dv">5000</span> <span class="sc">~</span> <span class="st">&quot;Super High&quot;</span></span>
<span id="cb11-18"><a href="analyzing-a-survey.html#cb11-18" tabindex="-1"></a>    ),</span>
<span id="cb11-19"><a href="analyzing-a-survey.html#cb11-19" tabindex="-1"></a>    RENTGRS</span>
<span id="cb11-20"><a href="analyzing-a-survey.html#cb11-20" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="analyzing-a-survey.html#cb11-21" tabindex="-1"></a>  <span class="co">#Concatenate variables into one column</span></span>
<span id="cb11-22"><a href="analyzing-a-survey.html#cb11-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">transmute</span>(</span>
<span id="cb11-23"><a href="analyzing-a-survey.html#cb11-23" tabindex="-1"></a>    household,</span>
<span id="cb11-24"><a href="analyzing-a-survey.html#cb11-24" tabindex="-1"></a>    HHWT, </span>
<span id="cb11-25"><a href="analyzing-a-survey.html#cb11-25" tabindex="-1"></a>    <span class="at">group =</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(borough, rent, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>),</span>
<span id="cb11-26"><a href="analyzing-a-survey.html#cb11-26" tabindex="-1"></a>    RENTGRS</span>
<span id="cb11-27"><a href="analyzing-a-survey.html#cb11-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-28"><a href="analyzing-a-survey.html#cb11-28" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(household, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-29"><a href="analyzing-a-survey.html#cb11-29" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">as_survey</span>(<span class="at">weights =</span> HHWT) <span class="sc">%&gt;%</span></span>
<span id="cb11-30"><a href="analyzing-a-survey.html#cb11-30" tabindex="-1"></a>  <span class="co">#Group and analyze by the concatenated variable</span></span>
<span id="cb11-31"><a href="analyzing-a-survey.html#cb11-31" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(</span>
<span id="cb11-32"><a href="analyzing-a-survey.html#cb11-32" tabindex="-1"></a>    <span class="at">.by =</span> group,</span>
<span id="cb11-33"><a href="analyzing-a-survey.html#cb11-33" tabindex="-1"></a>    <span class="at">rent =</span> srvyr<span class="sc">::</span><span class="fu">survey_median</span>(RENTGRS, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-34"><a href="analyzing-a-survey.html#cb11-34" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-35"><a href="analyzing-a-survey.html#cb11-35" tabindex="-1"></a>  <span class="co">#Split the concatenated variable back into multiple variables</span></span>
<span id="cb11-36"><a href="analyzing-a-survey.html#cb11-36" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb11-37"><a href="analyzing-a-survey.html#cb11-37" tabindex="-1"></a>    group, </span>
<span id="cb11-38"><a href="analyzing-a-survey.html#cb11-38" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;borough&quot;</span>, <span class="st">&quot;rent_level&quot;</span>),</span>
<span id="cb11-39"><a href="analyzing-a-survey.html#cb11-39" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot;-&quot;</span></span>
<span id="cb11-40"><a href="analyzing-a-survey.html#cb11-40" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-41"><a href="analyzing-a-survey.html#cb11-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>rent_se) <span class="sc">%&gt;%</span> </span>
<span id="cb11-42"><a href="analyzing-a-survey.html#cb11-42" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> borough, <span class="at">values_from =</span> rent) <span class="sc">%&gt;%</span> </span>
<span id="cb11-43"><a href="analyzing-a-survey.html#cb11-43" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-44"><a href="analyzing-a-survey.html#cb11-44" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">formatCurrency</span>(<span class="fu">c</span>(<span class="st">&quot;Bronx&quot;</span>, <span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Manhattan&quot;</span>, <span class="st">&quot;Queens&quot;</span>, <span class="st">&quot;Staten_Island&quot;</span>), <span class="at">digits =</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-4c2b67425c609824ed86" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4c2b67425c609824ed86">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["Above Median","Below Median","Super High","Super Low"],[2050,1340,5100,530],[2330,1380,6370,510],[2880,1300,6105,560],[2200,1390,5800,660],[2260,1440,7700,550]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>rent_level<\/th>\n      <th>Bronx<\/th>\n      <th>Brooklyn<\/th>\n      <th>Manhattan<\/th>\n      <th>Queens<\/th>\n      <th>Staten_Island<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":6,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"$\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-right","targets":[2,3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"rent_level","targets":1},{"name":"Bronx","targets":2},{"name":"Brooklyn","targets":3},{"name":"Manhattan","targets":4},{"name":"Queens","targets":5},{"name":"Staten_Island","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.columnDefs.4.render"],"jsHooks":[]}</script>
<hr style="border:2px solid blue">

</div>
            </section>

          </div>
        </div>
      </div>
<a href="querying-microdata-with-ipums.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
